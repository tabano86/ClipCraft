<idea-plugin>
    <id>com.clipcraft</id>
    <name>ClipCraft</name>
    <version>2.0.1</version>
    <vendor email="support@clipcraft.com" url="https://clipcraft.com">ClipCraft Inc.</vendor>
    <description><![CDATA[
      ClipCraft copies and formats code snippets from multiple files and directories.
      Includes snippet queue, advanced chunking, GPT integration placeholders, and more!
    ]]></description>
    <change-notes><![CDATA[
      Version 2.0.1:
      - Complete refactor for improved concurrency and configuration management.
      - Added a snippet queue tool window and GPT placeholders.
    ]]></change-notes>

    <!-- Dependencies -->
    <depends>com.intellij.modules.platform</depends>
    <idea-version since-build="223" until-build="243.*"/>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Notification group for balloon messages -->
        <notificationGroup id="ClipCraft" displayType="BALLOON"/>

        <!-- Persistent application-level settings service -->
        <applicationService serviceImplementation="com.clipcraft.services.ClipCraftSettings"/>

        <!-- Configuration panel for "File | Settings..." -->
        <applicationConfigurable
                id="clipcraft.settings"
                instance="com.clipcraft.ui.ClipCraftSettingsConfigurable"
                displayName="ClipCraft"/>

        <!-- Search Everywhere contributor -->
        <searchEverywhereContributor
                implementation="com.clipcraft.integration.ClipCraftSearchEverywhereContributorFactory"/>

        <!-- Tool Window (Snippet Queue) -->
        <toolWindow
                id="ClipCraft.SnippetQueue"
                factoryClass="com.clipcraft.ui.ClipCraftToolWindowFactory"
                anchor="left"
                secondary="true"
                icon="com.clipcraft.icons.ClipCraftIcons#CLIPCRAFT"/>
    </extensions>

    <actions>
        <!-- Main "Copy Formatted Code" action -->
        <action
                id="ClipCraftAction"
                class="com.clipcraft.actions.ClipCraftAction"
                text="ClipCraft: Copy Formatted Code"
                description="Copies and formats code from selected files and directories."
                icon="com.clipcraft.icons.ClipCraftIcons#CLIPCRAFT">
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt X"/>
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>

        <!-- Wizard action -->
        <action
                id="ClipCraftWizardAction"
                class="com.clipcraft.actions.ClipCraftWizardAction"
                text="ClipCraft: Setup Wizard"
                description="Interactive wizard for ClipCraft.">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>

        <!-- Reset to Defaults -->
        <action
                id="ClipCraftResetDefaultsAction"
                class="com.clipcraft.actions.ClipCraftResetDefaultsAction"
                text="ClipCraft: Reset Defaults"
                description="Reset all ClipCraft settings to default.">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>

        <!-- Switch Profile -->
        <action
                id="ClipCraftSwitchProfileAction"
                class="com.clipcraft.actions.ClipCraftSwitchProfileAction"
                text="ClipCraft: Switch Profile"
                description="Switch among multiple ClipCraft configuration profiles.">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>

        <!-- GPT action -->
        <action
                id="ClipCraftGPTAction"
                class="com.clipcraft.actions.ClipCraftGPTAction"
                text="ClipCraft: Copy & Prompt GPT"
                description="Copy snippet(s) plus GPT prompt.">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>

        <!-- Direct link to settings -->
        <action
                id="OpenClipCraftSettings"
                class="com.intellij.ide.actions.ShowSettingsAction"
                text="Open ClipCraft Settings"
                description="Open the ClipCraft settings panel.">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>

        <!-- Quick Access group -->
        <action
                id="ClipCraftQuickAccessActionGroup"
                class="com.intellij.openapi.actionSystem.DefaultActionGroup"
                text="ClipCraft Quick Access"
                description="Grouped ClipCraft actions"
                popup="true">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>
    </actions>
</idea-plugin>
