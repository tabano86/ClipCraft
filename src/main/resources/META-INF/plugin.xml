<idea-plugin>
    <id>com.clipcraft</id>
    <name>ClipCraft</name>
    <version>1.0.0</version>
    <vendor email="support@clipcraft.com" url="https://clipcraft.com">ClipCraft Inc.</vendor>

    <description><![CDATA[
    ClipCraft copies and formats code from multiple files/directories.
    Now with next-generation features:
     - multiple named profiles,
     - directory summaries,
     - advanced compression,
     - .gitignore integration,
     - GPT-friendly chunking,
     - concurrency for faster processing,
     - improved UI, and more!
    ]]></description>

    <depends>com.intellij.modules.platform</depends>

    <!-- Specify the supported IDE build range (now updated to match JDK 17/IntelliJ 2022.3) -->
    <idea-version since-build="223" until-build="243.*"/>

    <extensions defaultExtensionNs="com.intellij">
        <applicationService serviceImplementation="com.clipcraft.services.ClipCraftSettings"/>
        <!-- <projectService serviceImplementation="com.clipcraft.services.ClipCraftProjectProfileManager"/> -->
        <applicationConfigurable
                instance="com.clipcraft.ui.ClipCraftConfigurable"
                displayName="ClipCraft"
                id="ClipCraftConfigurable"/>
        <searchEverywhereContributor implementation="com.clipcraft.integration.ClipCraftSearchEverywhereContributor"/>
    </extensions>

    <actions>
        <action
                id="ClipCraftAction"
                class="com.clipcraft.actions.ClipCraftAction"
                text="ClipCraft: Copy Formatted Code"
                description="Copies and formats code from selected files in bulk.">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
            <add-to-group group-id="MainToolBar" anchor="last"/>
            <add-to-group group-id="EditorTabPopupMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt X"/>
        </action>

        <action
                id="ClipCraftWizardAction"
                class="com.clipcraft.actions.ClipCraftWizardAction"
                text="ClipCraft: Setup Wizard"
                description="Interactive wizard to configure ClipCraft.">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>

        <action
                id="ClipCraftResetDefaultsAction"
                class="com.clipcraft.actions.ClipCraftResetDefaultsAction"
                text="ClipCraft: Reset to Defaults"
                description="Reset ClipCraft settings to their default values.">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>

        <action
                id="ClipCraftSwitchProfileAction"
                class="com.clipcraft.actions.ClipCraftSwitchProfileAction"
                text="ClipCraft: Switch Profile"
                description="Switch among multiple named ClipCraft profiles.">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>

        <!-- Updated to use the public settings action -->
        <action
                id="OpenClipCraftSettings"
                class="com.intellij.ide.actions.ShowSettingsAction"
                text="Open ClipCraft Settings"
                configurableId="ClipCraftConfigurable"/>

        <!-- Define the Quick Access Action Group -->
        <action
                id="ClipCraftQuickAccessActionGroup"
                class="com.intellij.openapi.actionSystem.DefaultActionGroup"
                text="ClipCraft Quick Access"
                description="One-click ClipCraft settings and profiles"
                popup="true"/>

        <!-- Add the Quick Access group to the ToolsMenu -->
        <add-to-group group-id="ToolsMenu" anchor="last" action-id="ClipCraftQuickAccessActionGroup"/>
        <!-- Add child actions to the Quick Access group -->
        <add-to-group group-id="ClipCraftQuickAccessActionGroup" anchor="last" action-id="OpenClipCraftSettings"/>
        <add-to-group group-id="ClipCraftQuickAccessActionGroup" anchor="last" action-id="ClipCraftSwitchProfileAction"/>
    </actions>
</idea-plugin>
