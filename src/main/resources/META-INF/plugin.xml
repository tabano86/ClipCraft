<idea-plugin>
    <id>com.clipcraft</id>
    <name>ClipCraft</name>
    <version>0.3.2-SNAPSHOT</version>
    <vendor url="https://github.com/clipcraft" email="support@clipcraft.com">ClipCraft Inc.</vendor>
    <description><![CDATA[
ClipCraft extracts and formats code from multiple files or directories, supports concurrency modes,
dynamic ignoring, snippet previewing, a built-in lint scanner, and an AI‐assisted copy process.
    ]]></description>
    <change-notes><![CDATA[
6.1.0:
- Now we have one direct “ClipCraft Copy” action in CutCopyPasteGroup,
  plus a “ClipCraft Toolbox” submenu in the same group!
    ]]></change-notes>

    <!-- If needed, specify precise build versions instead of wildcard. Example:
    <idea-version since-build="241.14494" until-build="241.99999"/> -->
    <depends>com.intellij.modules.java</depends>

    <extensions defaultExtensionNs="com.intellij">

        <!-- Notification group for balloon messages -->
        <notificationGroup id="ClipCraft" displayType="BALLOON"/>

        <!-- Our settings page in Preferences | Settings -->
        <applicationConfigurable
                id="clipcraft.settings"
                instance="com.clipcraft.ui.ClipCraftSettingsConfigurable"
                displayName="ClipCraft"/>

        <!-- Lint tool window if you desire -->
        <toolWindow
                id="ClipCraft.Lint"
                factoryClass="com.clipcraft.ui.ClipCraftLintToolWindowFactory"
                anchor="bottom"
                icon="com.clipcraft.icons.ClipCraftIcons.CLIPCRAFT_24"
                secondary="true"/>

        <!-- Search Everywhere integration -->
        <searchEverywhereContributor
                implementation="com.clipcraft.integration.ClipCraftSearchEverywhereContributorFactory"/>
    </extensions>

    <actions>
        <!-- 1) A single direct action: 'ClipCraft Copy' in CutCopyPasteGroup. -->
        <action
                id="ClipCraftCopyAction"
                class="com.clipcraft.actions.ClipCraftAction"
                text="ClipCraft Copy"
                description="Copies, formats, and merges code snippets"
                icon="com.clipcraft.icons.ClipCraftIcons.CLIPCRAFT_16">

            <!-- Added directly to built-in Cut/Copy/Paste group -->
            <add-to-group group-id="CutCopyPasteGroup" anchor="last"/>
        </action>

        <!-- 2) A creative submenu also in the same group, holding the rest of your actions. -->
        <group
                id="ClipCraft.Submenu"
                text="ClipCraft Toolbox"
                description="All other ClipCraft features"
                popup="true"
                class="com.intellij.openapi.actionSystem.DefaultActionGroup">

            <!-- Attach this entire group to CutCopyPasteGroup as well -->
            <add-to-group group-id="CutCopyPasteGroup" anchor="last"/>

            <action
                    id="ClipCraftWizardAction"
                    class="com.clipcraft.actions.ClipCraftWizardAction"
                    text="Setup Wizard"
                    description="Guided configuration for ClipCraft"/>

            <action
                    id="ClipCraftResetDefaultsAction"
                    class="com.clipcraft.actions.ClipCraftResetDefaultsAction"
                    text="Reset Defaults"
                    description="Reset all ClipCraft settings to factory state"/>

            <action
                    id="ClipCraftSwitchProfileAction"
                    class="com.clipcraft.actions.ClipCraftSwitchProfileAction"
                    text="Switch Profile"
                    description="Switch among multiple ClipCraft profiles"/>

            <action
                    id="OpenClipCraftSettings"
                    class="com.intellij.ide.actions.ShowSettingsAction"
                    text="Open ClipCraft Settings"
                    description="Opens the ClipCraft settings page"/>

            <separator/>

            <action
                    id="ClipCraftAddSnippetFromCursorAction"
                    class="com.clipcraft.actions.ClipCraftAddSnippetFromCursorOrSelectionAction"
                    text="Add Snippet from Caret"
                    description="Extract snippet from code near caret or selection"/>
        </group>
    </actions>
</idea-plugin>
